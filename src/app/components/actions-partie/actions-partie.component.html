<ng-container [ngSwitch]="etatPartie" *ngIf="detailsJoueur && joueurActif">
	<p *ngSwitchCase="'Finie'">
		Cette partie est terminÃ©e. Le vainqueur est {{ gagnant.nom }} avec {{ gagnant.ressources.score }} points.
	</p>
	<div *ngSwitchCase="'Non commencÃ©e'">
			<!-- Si on n'est pas au moins deux -->
			<div *ngIf="nbJoueurs < 2; then attente else lancement"></div>
			<ng-template #attente>
				<p>En attente d'autres joueurs... (min 2 / max 4)</p>
			</ng-template>
			<ng-template #lancement>
				<!-- Si je suis l'hÃ´te -->
				<div *ngIf="monTour; then hote else invite"></div>
				<ng-template #hote>
					<p *ngIf="nbJoueurs < 4">
						Vous pouvez attendre d'autres joueurs ou lancer la partie ({{ nbJoueurs }}/4)
					</p>
					<button (click)="commencerPartie()">Commencer</button>
				</ng-template>
				<ng-template #invite>
					<p>En attente du lancement de la partie par {{ joueurActif?.nom }}</p>
				</ng-template>
			</ng-template>
	</div>
	<div *ngSwitchCase="'En cours'">
		<span class="float-left">Manche {{ infosPartie.manche }} :&nbsp;</span>
		<div *ngIf="monTour; then mon_tour else pas_mon_tour"></div>
		<ng-template #mon_tour>
			<!-- Tour de jeu normal -->
			<div *ngIf="detailsJoueur.ouvriers > 0 && !infosPartie.finManche || joueurActif.aJoue">
				<!-- Si je n'ai pas encore jouÃ© -->
				<div *ngIf="!joueurActif?.aJoue; then jouer else passer"></div>
				<ng-template #jouer>
					<p>Place un ouvrier sur le plateau ou construisez un bÃ¢timent.</p>
				</ng-template>
				<ng-template #passer>
					<p>
						Vous avez utilisÃ© tous les bÃ¢timents que vous souhaitiez utiliser ?
					</p>
					<button (click)="finTour()">Fin du tour</button>
				</ng-template>
			</div>
			<!-- Fin de manche - Si je n'ai pas encore jouÃ© et que je n'ai plus d'ouvriers -->
			<div *ngIf="!joueurActif?.aJoue && detailsJoueur.ouvriers == 0">
				<h3>Fin de la manche {{ infosPartie.manche }}</h3>
				<p>Vous pouvez activer vos bÃ¢timents spÃ©ciaux si vous en avez. (RÃ©sidence ou CathÃ©drale)</p>
				<div *ngIf="joueurActif.ouvriersANourrir > 0; else finirManche">
					<p>Il vous reste {{ joueurActif.ouvriersANourrir }} ouvriers Ã  nourrir.</p>
					<button *ngIf="detailsJoueur.ressources.poisson > 0" (click)="nourrirOuvrier('poisson')">Donner 1 ğŸŸ</button>
					<button *ngIf="detailsJoueur.ressources.ble > 0" (click)="nourrirOuvrier('ble')">Donner 1 ğŸŒ½</button>
					<button *ngIf="detailsJoueur.ressources.piece >= 3" (click)="nourrirOuvrier('piece')">Payer 3 ğŸ’°</button>
					<button (click)="nourrirOuvrier('score')">Perdre 3 â­</button>
				</div>
				<ng-template #finirManche>
					<button (click)="finManche()">Finir la manche</button>
				</ng-template>
			</div>

			<!-- Debut de manche - Si je n'ai pas encore jouÃ©, que j'ai des ouvriers et qu'on est en fin de manche -->
			<div *ngIf="!joueurActif?.aJoue && detailsJoueur.ouvriers > 0 && infosPartie.finManche && infosPartie.manche < 4">
				PrÃªt pour la manche suivante ? <button (click)="commencerManche()">Commencer la manche {{ infosPartie.manche + 1 }}</button>
			</div>

			<!-- Fin de partie  -->
			<div *ngIf="!joueurActif?.aJoue && detailsJoueur.ouvriers > 0 && infosPartie.finManche && infosPartie.manche == 4">
				<h3>Fin de la partie</h3>
				<button (click)="finPartie()">Calculer les scores</button>
			</div>
		</ng-template>

		<ng-template #pas_mon_tour>
			<p>C'est au tour de {{ joueurActif?.nom }}</p>
		</ng-template>
	</div>

	<p *ngSwitchDefault>
		Erreur : partie Ã  l'Ã©tat {{ etatPartie }}
	</p>
</ng-container>